(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{194:function(s,a,n){s.exports=n.p+"assets/img/ecs1.63b03798.jpg"},195:function(s,a,n){s.exports=n.p+"assets/img/nginx1.92140f1f.png"},196:function(s,a,n){s.exports=n.p+"assets/img/filezilla1.9e96c20c.jpg"},197:function(s,a,n){s.exports=n.p+"assets/img/filezilla2.21bc5291.jpg"},218:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"完善阶段"}},[s._v("完善阶段")]),s._v(" "),t("h2",{attrs:{id:"进入-ecs-服务器"}},[s._v("进入 ECS 服务器")]),s._v(" "),t("ol",[t("li",[s._v("输入登录指令")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@47.98.20.206\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("输入密码，看到如下欢迎界面表示登录成功\n"),t("img",{attrs:{src:n(194),alt:"detail"}})])]),s._v(" "),t("h2",{attrs:{id:"服务端代码配置"}},[s._v("服务端代码配置")]),s._v(" "),t("blockquote",[t("p",[s._v("课程中购买使用的的 ECS 是配置了 node 服务的，所以里面的 nginx node git 这些命令都是可以直接使用的，如果没有配置node 服务需要自己安装这些命令。")])]),s._v(" "),t("ol",[t("li",[s._v("生成 SSH 密钥添加到 github 仓库")])]),s._v(" "),t("blockquote",[t("p",[s._v("SSH 密钥的添加可以查看上一节内容")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("创建项目")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" mode-egg-admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("下载服务端项目源码")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@github.com:xx/xx.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("进入项目安装项目依赖包")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("启动项目")])]),s._v(" "),t("blockquote",[t("p",[s._v("如果直接克隆的是课程的成品源码文件，直接启动是启动不了的，源码文件中删除了 https 证书和 db.js,需要根据自己的数据库和证书内容进行添加")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"nginx-配置"}},[s._v("nginx 配置")]),s._v(" "),t("ol",[t("li",[s._v("在服务器上创建nginx配置文件")])]),s._v(" "),t("blockquote",[t("p",[s._v("这个配置文件可以随意命名，但是需要是 .conf 文件")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" upload.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",[t("li",[s._v("查找nginx命令的实际执行文件")])]),s._v(" "),t("blockquote",[t("p",[s._v("课程中的 nginx 是 ECS 中配置好了的，可以通过 nginx -t 找到 nginx 的配置文件 nginx.conf\n"),t("img",{attrs:{src:n(195),alt:"detail"}})])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("进入nginx 配置文件")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" /etc/nginx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("打开 nginx.conf 配置文件, 点击 i 键进入编辑状态，修改 user,使用 include 指向本地 nginx 配置文件 upload.conf")])]),s._v(" "),t("blockquote",[t("p",[s._v("ECS 这里默认使用 include 配置一个文件，指向 /etc/nginx/conf.d/default.conf，它占用了 80 端口并将其重定向到 3000端口，在使用时可以在 nginx.conf 中删除或或者该 include 指向代码。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim nginx.conf\n\n// nginx\nuser root;\n...\ninclude upload.conf的文件位置\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("配置完成后按 esc 输入 :wq 退出配置文件")]),s._v(" "),t("li",[s._v("进入 upload.conf 文件夹下,打开 upload.conf 配置 http 端口")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("server\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n  charset utf-8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  listen 80"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  server_name http_host"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  root /root/nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  autoindex off"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  add_header Cache-Control "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache, must-revalidate"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    add_header Access-Control-Allow-Origin *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("配置 https")])]),s._v(" "),t("blockquote",[t("p",[s._v("配置 https 服务需要有 SSL 证书，如果没有可以单独配置 http 服务. error_log\\access_log 存放日志文件的文件夹")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("server\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  listen 443 default ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  server_name https_host"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  root /root/nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  autoindex off"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  add_header Cache-Control "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache, must-revalidate"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    add_header Access-Control-Allow-Origin *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  ssl_certificate /xx.pem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_certificate_key /xx.key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_session_timeout  5m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_protocols  SSLv3 TLSv2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_ciphers  ALL:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("ADH:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_prefer_server_ciphers  on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  error_log /root/xx.log error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  access_log  /root/xx.log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("ol",{attrs:{start:"6"}},[t("li",[s._v("退出配置文件，检查 nginx 语法问题")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nginx -t \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"7"}},[t("li",[s._v("重启 nginx 服务")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nginx -s reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"前端代码上传"}},[s._v("前端代码上传")]),s._v(" "),t("h2",{attrs:{id:"filezilla-使用方式"}},[s._v("FileZilla 使用方式")]),s._v(" "),t("blockquote",[t("p",[s._v("向服务器上上传文件可以通过 FileZilla实现。 "),t("a",{attrs:{href:"https://filezilla-project.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("FileZilla 下载地址:"),t("OutboundLink")],1)])]),s._v(" "),t("ol",[t("li",[s._v("打开 FileZilla 软件后，点击左上方的连接按钮\n"),t("img",{attrs:{src:n(196),alt:"detail"}})]),s._v(" "),t("li",[s._v("这里会显示你连接的所有站点，点击‘新站点’ 输入服务器的主机地址、用户名、密码 后点击 ‘连接’ 按钮")]),s._v(" "),t("li",[s._v("连接成功后会显示服务器上的文件内容，左边是你本地文件，右边是服务上的文件\n"),t("img",{attrs:{src:n(197),alt:"detail"}})]),s._v(" "),t("li",[s._v("打开服务上 nginx 配置的入口文件，将前端项目打包后的代码拖到服务上")]),s._v(" "),t("li",[s._v("文件传输完毕就可以进行访问了")])])])},[],!1,null,null,null);a.default=e.exports}}]);